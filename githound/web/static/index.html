<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GitHound - Advanced Git History Search</title>
    <meta name="description" content="Advanced Git repository search with multi-modal capabilities" />

    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUa6c+yl9KvkqWn6+3UOEJfgm6ddd6ZgMAr1rHyoQFNy+8dNdxjbyeVd4+BL"
      crossorigin="anonymous"
    />

    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
    />

    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" media="(prefers-color-scheme: dark)">

    <!-- Custom CSS -->
    <link href="style.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Theme Toggle Button -->
    <button type="button" class="theme-toggle" id="themeToggle" title="Toggle theme">
      <i class="fas fa-moon" id="themeIcon"></i>
    </button>

    <!-- Connection Status Indicator will be created dynamically by JavaScript -->

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <span class="navbar-brand mb-0 h1">
          <i class="fas fa-dog"></i> GitHound
        </span>
        <span class="navbar-text">
          <i class="fas fa-search me-2"></i>Advanced Git History Search
        </span>
        <div class="navbar-nav ms-auto">
          <button type="button" class="btn btn-outline-light btn-sm" onclick="showHelp()">
            <i class="fas fa-question-circle"></i> Help
          </button>
        </div>
      </div>
    </nav>

    <div class="container mt-4">
      <!-- Dashboard Section -->
      <div class="row mb-4">
        <div class="col-md-3">
          <div class="card glass fade-in-up">
            <div class="card-body text-center">
              <i class="fas fa-search fa-2x text-primary mb-2"></i>
              <h6 class="card-title">Total Searches</h6>
              <h4 class="gradient-text" id="totalSearches">0</h4>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card glass fade-in-up animation-delay-1">
            <div class="card-body text-center">
              <i class="fas fa-clock fa-2x text-info mb-2"></i>
              <h6 class="card-title">Active Searches</h6>
              <h4 class="gradient-text" id="activeSearches">0</h4>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card glass fade-in-up animation-delay-2">
            <div class="card-body text-center">
              <i class="fas fa-file-code fa-2x text-success mb-2"></i>
              <h6 class="card-title">Results Found</h6>
              <h4 class="gradient-text" id="totalResults">0</h4>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card glass fade-in-up animation-delay-3">
            <div class="card-body text-center">
              <i class="fas fa-history fa-2x text-warning mb-2"></i>
              <h6 class="card-title">Last Search</h6>
              <small class="text-muted" id="lastSearchTime">Never</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">
                <i class="fas fa-bolt"></i> Quick Actions
              </h5>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-md-3 mb-2">
                  <button type="button" class="btn btn-outline-primary w-100" onclick="loadSearchTemplate('recent-commits')">
                    <i class="fas fa-clock"></i> Recent Commits
                  </button>
                </div>
                <div class="col-md-3 mb-2">
                  <button type="button" class="btn btn-outline-success w-100" onclick="loadSearchTemplate('bug-fixes')">
                    <i class="fas fa-bug"></i> Bug Fixes
                  </button>
                </div>
                <div class="col-md-3 mb-2">
                  <button type="button" class="btn btn-outline-info w-100" onclick="loadSearchTemplate('code-changes')">
                    <i class="fas fa-code"></i> Code Changes
                  </button>
                </div>
                <div class="col-md-3 mb-2">
                  <button type="button" class="btn btn-outline-warning w-100" onclick="showSearchHistory()">
                    <i class="fas fa-history"></i> Search History
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Search Form -->
      <div class="card mb-4 fade-in-up">
        <div class="card-header">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="mb-0">
              <i class="fas fa-search"></i> Search Configuration
            </h5>
            <div class="btn-group btn-group-sm">
              <button type="button" class="btn btn-outline-secondary" onclick="saveSearchTemplate()">
                <i class="fas fa-save"></i> Save Template
              </button>
              <button type="button" class="btn btn-outline-secondary" onclick="loadSearchTemplate()">
                <i class="fas fa-folder-open"></i> Load Template
              </button>
              <button type="button" class="btn btn-outline-secondary" onclick="clearForm()">
                <i class="fas fa-eraser"></i> Clear
              </button>
            </div>
          </div>
        </div>
        <div class="card-body">
          <form id="searchForm">
            <!-- Repository Path -->
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="repoPath" class="form-label"
                  >Repository Path *</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="repoPath"
                  required
                  placeholder="/path/to/git/repository"
                  value="."
                />
              </div>
              <div class="col-md-6">
                <label for="branch" class="form-label">Branch</label>
                <input
                  type="text"
                  class="form-control"
                  id="branch"
                  placeholder="main (leave empty for current branch)"
                />
              </div>
            </div>

            <!-- Search Criteria Tabs -->
            <ul class="nav nav-tabs" id="searchTabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link active"
                  id="content-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#content"
                  type="button"
                  role="tab"
                >
                  <i class="fas fa-file-alt"></i> Content
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="commit-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#commit"
                  type="button"
                  role="tab"
                >
                  <i class="fas fa-code-branch"></i> Commit
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="files-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#files"
                  type="button"
                  role="tab"
                >
                  <i class="fas fa-folder"></i> Files
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="advanced-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#advanced"
                  type="button"
                  role="tab"
                >
                  <i class="fas fa-cogs"></i> Advanced
                </button>
              </li>
            </ul>

            <div class="tab-content mt-3" id="searchTabContent">
              <!-- Content Search -->
              <div
                class="tab-pane fade show active"
                id="content"
                role="tabpanel"
              >
                <div class="row">
                  <div class="col-md-8">
                    <label for="contentPattern" class="form-label"
                      >Content Pattern</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="contentPattern"
                      placeholder="Regular expression or text to search for"
                    />
                  </div>
                  <div class="col-md-4">
                    <label class="form-label">&nbsp;</label>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="caseSensitive"
                      />
                      <label class="form-check-label" for="caseSensitive">
                        Case Sensitive
                      </label>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Commit Search -->
              <div class="tab-pane fade" id="commit" role="tabpanel">
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="commitHash" class="form-label"
                      >Commit Hash</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="commitHash"
                      placeholder="Full or partial commit hash"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="authorPattern" class="form-label">Author</label>
                    <input
                      type="text"
                      class="form-control"
                      id="authorPattern"
                      placeholder="Author name or email"
                    />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-12">
                    <label for="messagePattern" class="form-label"
                      >Commit Message</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="messagePattern"
                      placeholder="Search in commit messages"
                    />
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <label for="dateFrom" class="form-label">Date From</label>
                    <input type="date" class="form-control" id="dateFrom" />
                  </div>
                  <div class="col-md-6">
                    <label for="dateTo" class="form-label">Date To</label>
                    <input type="date" class="form-control" id="dateTo" />
                  </div>
                </div>
              </div>

              <!-- File Search -->
              <div class="tab-pane fade" id="files" role="tabpanel">
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="filePathPattern" class="form-label"
                      >File Path Pattern</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="filePathPattern"
                      placeholder="e.g., *.py or src/**/*.js"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="fileExtensions" class="form-label"
                      >File Extensions</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="fileExtensions"
                      placeholder="py,js,java (comma-separated)"
                    />
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <label for="includeGlobs" class="form-label"
                      >Include Patterns</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="includeGlobs"
                      placeholder="src/**,tests/** (comma-separated)"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="excludeGlobs" class="form-label"
                      >Exclude Patterns</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="excludeGlobs"
                      placeholder="node_modules/**,*.log (comma-separated)"
                    />
                  </div>
                </div>
              </div>

              <!-- Advanced Options -->
              <div class="tab-pane fade" id="advanced" role="tabpanel">
                <div class="row mb-3">
                  <div class="col-md-4">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="fuzzySearch"
                      />
                      <label class="form-check-label" for="fuzzySearch">
                        Enable Fuzzy Search
                      </label>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <label for="fuzzyThreshold" class="form-label"
                      >Fuzzy Threshold</label
                    >
                    <input
                      type="range"
                      class="form-range"
                      id="fuzzyThreshold"
                      min="0"
                      max="1"
                      step="0.1"
                      value="0.8"
                    />
                    <small class="text-muted"
                      >Current: <span id="fuzzyThresholdValue">0.8</span></small
                    >
                  </div>
                  <div class="col-md-4">
                    <label for="maxResults" class="form-label"
                      >Max Results</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="maxResults"
                      placeholder="1000"
                      min="1"
                      max="10000"
                    />
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <label for="maxFileSize" class="form-label"
                      >Max File Size (bytes)</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="maxFileSize"
                      placeholder="10485760 (10MB)"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="timeoutSeconds" class="form-label"
                      >Timeout (seconds)</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="timeoutSeconds"
                      value="300"
                      min="10"
                      max="3600"
                    />
                  </div>
                </div>
              </div>
            </div>

            <!-- Search Button -->
            <div class="row mt-4">
              <div class="col-12">
                <button
                  type="submit"
                  class="btn btn-primary btn-lg"
                  id="searchButton"
                >
                  <i class="fas fa-search"></i> Start Search
                </button>
                <button
                  type="button"
                  class="btn btn-secondary btn-lg ms-2 d-none"
                  id="cancelButton"
                >
                  <i class="fas fa-stop"></i> Cancel Search
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>

      <!-- Progress Section -->
      <div class="card mb-4 d-none" id="progressCard">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="fas fa-spinner fa-spin"></i> Search Progress
          </h5>
        </div>
        <div class="card-body">
          <div class="progress mb-3">
            <div
              class="progress-bar progress-bar-striped progress-bar-animated progress-bar-initial"
              id="progressBar"
              role="progressbar"
              aria-valuenow="0"
              aria-valuemin="0"
              aria-valuemax="100"
              aria-label="Search progress"
            ></div>
          </div>
          <div id="progressMessage" class="text-muted">
            Initializing search...
          </div>
          <div class="row mt-3">
            <div class="col-md-4">
              <small class="text-muted"
                >Results Found: <span id="resultsCount">0</span></small
              >
            </div>
            <div class="col-md-4">
              <small class="text-muted"
                >Status: <span id="searchStatus">Starting</span></small
              >
            </div>
            <div class="col-md-4">
              <small class="text-muted"
                >Search ID: <span id="searchId">-</span></small
              >
            </div>
          </div>
        </div>
      </div>

      <!-- Results Section -->
      <div class="card d-none" id="resultsCard">
        <div
          class="card-header d-flex justify-content-between align-items-center"
        >
          <h5 class="mb-0"><i class="fas fa-list"></i> Search Results</h5>
          <div class="btn-group" role="group">
            <button
              type="button"
              class="btn btn-outline-primary btn-sm"
              id="exportJson"
            >
              <i class="fas fa-download"></i> JSON
            </button>
            <button
              type="button"
              class="btn btn-outline-primary btn-sm"
              id="exportCsv"
            >
              <i class="fas fa-download"></i> CSV
            </button>
          </div>
        </div>
        <div class="card-body">
          <div id="resultsContainer">
            <!-- Results will be populated here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous">
    </script>

    <!-- Highlight.js for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/cpp.min.js"></script>

    <!-- Custom JS -->
    <script src="app.js"></script>
  </body>
</html>
